
import * as THREE from "three/build/three.module";
import recipes from '../../data/gameRecipes.json';

const ASSET_PATH = "<%= Rails.configuration.assets.prefix %>";
const ASSET_FINGERPRINT = "<%= Rails.configuration.assets.manifest %>".trim();

function hashedAssetName(name) {
  if (ASSET_FINGERPRINT && ASSET_FINGERPRINT !== '') {
    return `${name}-${ASSET_FINGERPRINT}`;
  }
  return name;
}

var recipeMaterials = {};
const loader = new THREE.TextureLoader();

Object.entries(recipes).forEach(([id, name]) => {
  var texture = loader.load(`${ASSET_PATH}/game_icons/recipes/${hashedAssetName(id)}.png`);

  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
  texture.repeat.set(1, 1);

  recipeMaterials[id] = new THREE.MeshBasicMaterial({
    map: texture,
    transparent: true,
  });
});

export default recipeMaterials;